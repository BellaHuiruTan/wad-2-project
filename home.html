<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Hind+Siliguri|Pattaya" rel="stylesheet">
    <link href="assets/css/central.css"  rel="stylesheet">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <!---------------------- END BASIC CSS (DUN TOUCH HERE) -------------------------->
    <link href="assets/css/home.css"  rel="stylesheet">

    
    <title>Home Trail</title>
</head>
<body>

<!---------------------END NAV BAR (DUN TOUCH HERE)-------------------->
   
             <!-- nav bar taken from style.js Vue js Component -->
          <div id='homenav'>
              <home-navbar></home-navbar>
          </div>
  <div id= "container">
<!---------------------END NAV BAR (DUN TOUCH HERE)-------------------->

      <div class="container">
        <div class="row">
          
            <h2>What you feel like eating:</h2>
            <!---------------------START Search -------------------->
    <!-- Food search  -->
    <div class="bar">
        <!-- Create a binding between the searchString model and the text field -->
        <input type="text" class="form-control mr-2" id="search" v-model="searchString" placeholder="Enter your food, ingredients" />
    </div>  
<!---------------------END Search -------------------->
            <div id="carouselExample" class="carousel slide w-100" data-bs-ride="carousel" data-bs-interval="3000">
           <!-- <div class="carousel-indicators">
             <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="0" class="active"></button>
             <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="1"></button>
             <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="2"></button>
           </div> -->
           <div class="carousel-inner" id="searchCarousel">
             
           </div>

          </div>
          

          <div id="myDIV">
            This is my DIV element.
            </div>
      

      </div>

           <div class="row">
               <div class="col-lg-8 col-lg-offset-2">
                   <h1>Feeling Hungry Again?</h1>
                   <p>Bacon ipsum dolor sit amet tri-tip shoulder tenderloin shankle. Bresaola tail pancetta ball tip doner meatloaf corned beef. Kevin pastrami tri-tip prosciutto ham hock pork belly bacon pork loin salami pork chop shank corned beef tenderloin meatball cow. Pork bresaola meatloaf tongue, landjaeger tail andouille strip steak tenderloin sausage chicken tri-tip. Pastrami tri-tip kielbasa sausage porchetta pig sirloin boudin rump meatball andouille chuck tenderloin biltong shank </p>
                   <p>Pig meatloaf bresaola, spare ribs venison short loin rump pork loin drumstick jowl meatball brisket. Landjaeger chicken fatback pork loin doner sirloin cow short ribs hamburger shoulder salami pastrami. Pork swine beef ribs t-bone flank filet mignon, ground round tongue. Tri-tip cow turducken shank beef shoulder bresaola tongue flank leberkas ball tip.</p>
               
               </div>
           </div>


       </div>


      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>   
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
</body>

<script>

var search = document.getElementById("search");

// Execute a function when the user releases a key on the keyboard
search.addEventListener("keyup", function(event) {
  // Number 13 is the "Enter" key on the keyboard
  if (event.keyCode === 13) {
    var q = search.value
   
    $.ajax({
    type: "GET",
    dataType: "json",
    url: "https://api.edamam.com/api/recipes/v2?type=public&q="+ q +"&app_id=01b3b5d9&app_key=388ac25dc41e876768b68fa8fa57df91",
    crossDomain: true,
    success: function(response) {
      console.log(response.hits)
       
        var carousel = document.getElementById("searchCarousel")
        carousel.innerHTML = ""
      for (var i = 0; i<response.hits.length; i++){
        if ( i == 0){
          var active = "active"
        }
        else{
          var active = ""
        }
        
        carousel.innerHTML += ` <div class="carousel-item ${active}">
                       <div class="col-md-3" style="float:left">
                         <div class="card mb-2">
                           <img class="card-img-top"
                             src="${response.hits[i].recipe.image}" alt="Card image cap">
                           <div class="card-body">
                             <h4 class="card-title">${response.hits[i].recipe.label}</h4>
                             <p class="card-text">This dish has ${response.hits[i].recipe.calories} calories hor </p>
                               <p class="card-text">You can from the find their recipe and nutrition value at the button </p>
                             <a class="btn btn-primary recipebtn" onclick="myFunction(${search.value})">Button</a>
                           </div>
                         </div>
                       </div>
                      </div>`
    }

    },

    error : function(xhr, status, error)
    {
        console.log("Status of error message" + status + "Error is" + error);
    }   

});
  }
});











var food = "salad"
  $.ajax({
    type: "GET",
    dataType: "json",
    url: "https://tih-api.stb.gov.sg/content/v1/food-beverages/search?keyword="+ food +"&language=en&apikey=Hbjt6beOzjpqSGAq9KKKbVBf5YtyzozN",
    crossDomain: true,
//     beforeSend: function(request) {
//     request.setRequestHeader("apikey", "Hbjt6beOzjpqSGAq9KKKbVBf5YtyzozN");
//   },
//     data: {
//         keyword : "chicken rice",

//     },
    success: function(response) {
      console.log(response)
    },
    error: function(xhr) {

    }
  });







///////////////////////////////SEARCH FODD////////////////////////////////////


function myFunction(id){
  document.getElementById("myDIV").innerHTML = ""

  https://api.spoonacular.com/recipes/{id}/nutritionLabel

  $.ajax({
                type: 'get',
                url: "https://api.spoonacular.com/recipes/"+ id+"/nutritionLabel?apiKey=bf474c18dfd04d1ab99f22a87c496ed2",  
                beforeSend: function(xhr) { 
                  xhr.setRequestHeader("Content-Type", "application/json"); 
                },      
                success:function(response)
                { console.log(response);
               document.getElementById("myDIV").innerHTML += response

                  },
                  error : function(xhr, status, error)
                  {
                      console.log("Status of error message" + status + "Error is" + error);
                  }} ) 


                $.ajax({
                type: 'get',
                url: "https://api.spoonacular.com/recipes/"+ id +"/summary?apiKey=bf474c18dfd04d1ab99f22a87c496ed2",  
                beforeSend: function(xhr) { 
                  xhr.setRequestHeader("Content-Type", "application/json"); 
                },      
                success:function(response)
                { console.log(response);
                  var x = document.getElementById("myDIV");
                  $('.recipebtn').click(function() {
                      $('#myDIV').toggle('slow');
                  });
  document.getElementById("myDIV").innerHTML += response.summary

                  },
                  error : function(xhr, status, error)
                  {
                      console.log("Status of error message" + status + "Error is" + error);
                  }  
      });}

    


///////////////////// Search Food /////////////////////////

// var search = document.getElementById("search");

// // Execute a function when the user releases a key on the keyboard
// search.addEventListener("keyup", function(event) {
//   // Number 13 is the "Enter" key on the keyboard
//   if (event.keyCode === 13) {
//     var q = search.value
//     $.ajax({
//     type: 'get',
    
//     url: "https://api.spoonacular.com/recipes/complexSearch?query="+q+"&maxFat=25&number=5&apiKey=bf474c18dfd04d1ab99f22a87c496ed2",  
//     beforeSend: function(xhr) { 
//       xhr.setRequestHeader("Content-Type", "application/json"); 
//     },      
//     success:function(response)
//     {

//         console.log(response.results);
//         var carousel = document.getElementById("searchCarousel")
//         carousel.innerHTML = ""
//       for (var i = 0; i<response.results.length; i++){
//         if ( i == 0){
//           var active = "active"
//         }
//         else{
//           var active = ""
//         }
        
//         carousel.innerHTML += ` <div class="carousel-item ${active}">
//                        <div class="col-md-3" style="float:left">
//                          <div class="card mb-2">
//                            <img class="card-img-top"
//                              src="${response.results[i].image}" alt="Card image cap">
//                            <div class="card-body">
//                              <h4 class="card-title">${response.results[i].title}</h4>
//                              <p class="card-text">This dish has </p>
//                                <p class="card-text">You can from the find their recipe and nutrition value at the button </p>
//                              <a class="btn btn-primary recipebtn" onclick="myFunction(${response.results[i].id})">Button</a>
//                            </div>
//                          </div>
//                        </div>
//                       </div>`
//     }

//     },

//     error : function(xhr, status, error)
//     {
//         console.log("Status of error message" + status + "Error is" + error);
//     }   

// });
//   }
//});




</script>
<script src='style.js'></script>
</html>
